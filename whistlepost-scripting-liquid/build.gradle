//import aQute.bnd.gradle.Bundle
//
//buildscript {
//    repositories {
//        mavenCentral()
//    }
//}
//plugins {
//    id "biz.aQute.bnd.builder" version "4.2.0"
//}

configurations {
    bundles {
        transitive = false
        canBeConsumed = true
        canBeResolved = false
    }
}

//repositories {
//    mavenCentral()
//}

dependencies {
    compile 'org.apache.sling:org.apache.sling.scripting.api:2.2.0',
            'org.apache.sling:org.apache.sling.commons.classloader:1.4.4',
            'org.osgi:osgi.core:6.0.0',
            'org.osgi:org.osgi.service.component.annotations:1.3.0',
            'org.osgi:org.osgi.service.metatype.annotations:1.3.0',
            'org.osgi:org.osgi.annotation:6.0.0',
            'nl.big-o:liqp:0.7.8'

//    embed 'nl.big-o:liqp:0.7.8'

    bundles 'org.jsoup:jsoup:1.10.3', 'org.antlr:antlr4-runtime:4.9.1'
}

//task bundle(type: Bundle) {
//    from sourceSets.main.output
//    bnd '-includeresource.lib': 'liqp-0.7.8.jar;lib:=true'
//}

//jar {
//    into("libs") {
//        from configurations.embed
//    }
//    manifest {
//        attributes(
//            'Import-Package': 'liqp;resolution:=optional,*',
//            'Bundle-ClassPath': ".,${configurations.embed.dependencies.collect { "libs/$it.name-${it.version}.jar" }.join(',')}",
//            'Provide-Capability': 'osgi.service;objectClass:List<String>="org.whistlepost.scripting.liquid.LiquidScriptEngineFactory"'
//        )
//    }
//}

//jar.enabled = false
//
//artifacts {
//    archives bundle
//    archives javadocJar
//    archives sourcesJar
//}
