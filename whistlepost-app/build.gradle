plugins {
  id "com.moowork.node" version "1.2.0"
}

node {
  download = true
}

task buildWebpack(type: NpmTask) {
  args = ['run', 'buildWebpack']
}

jar {
  manifest {
    instruction 'Sling-Initial-Content', 'SLING-INF/content;path:=/apps/wp;overwrite:=true'
  }
}

jar.dependsOn buildWebpack
buildWebpack.dependsOn yarn
clean.dependsOn yarn_cache_clean
